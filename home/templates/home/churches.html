{% extends "base.html" %} {% load static %} {% block content %}
<div class="container mx-auto py-8">
    <h1 class="text-lg font-bold mb-6 text-center">Contact Your Church</h1>
    <div
        class="grid sm:grid-cols-1 md:grid-cols-4 lg:grid-cols-5 grid-rows-4 gap-3"
    >
        {% for church in churches %} {% comment %}
        <pre>{{ church }}</pre>
        {% endcomment %}
        <div class="flip-card max-w-xs w-full mb-auto">
            <div
                class="flip-card-inner transition-transform duration-500"
                onclick="this.classList.toggle('flipped')"
            >
                <!-- Front Side -->
                <div
                    class="flip-card-front card bg-base-100 shadow-lg cursor-pointer flex flex-col items-center justify-center"
                >
                    {% if church.image %}
                    <img
                        src="{{ church.image.url }}"
                        alt="{{ church.name }}"
                        class="w-full h-full object-cover rounded-t"
                    />
                    {% else %}
                    <div
                        class="w-full h-24 bg-gray-200 rounded-t flex items-center justify-center"
                    >
                        <i
                            class="fa-solid fa-church text-4xl text-gray-400"
                        ></i>
                    </div>
                    {% endif %}
                    <h2
                        class="card-title text-base font-semibold mt-4 text-center"
                    >
                        {{church.name}}
                    </h2>
                </div>
                <!-- Back Side -->
                <div
                    class="flip-card-back card bg-base-100 shadow-xl flex flex-col justify-between p-2"
                >
                    <div>
                        <p class="font-semibold mb-2">
                            <i class="fa-solid fa-location-dot mr-2"></i
                            >{{church.address}} {{church.postcode}}
                        </p>
                        <p class="mb-4">
                            <i class="fa-solid fa-phone mr-2"></i
                            >{{church.contact}}
                        </p>
                    </div>
                    <div class="flex flex-wrap gap-2 justify-center mt-2">
                        <a
                            href="{{church.website}}"
                            class="btn btn-sm btn-primary"
                            target="_blank"
                            title="Website"
                        >
                            <i
                                class="fa-solid fa-arrow-up-right-from-square"
                            ></i>
                        </a>
                        <a
                            href="{{church.address}}"
                            class="btn btn-sm btn-info"
                            target="_blank"
                            title="Directions"
                        >
                            <i class="fa-solid fa-map-location-dot"></i>
                        </a>
                        <button
                            class="btn btn-sm btn-success"
                            onclick="saveChurch('{{ church.id }}')"
                            title="Save"
                        >
                            <i class="fa-solid fa-bookmark"></i>
                        </button>
                        <button
                            class="btn btn-sm btn-warning"
                            onclick="shareChurch('{{church.name}}', '{{church.website}}')"
                            title="Share"
                        >
                            <i class="fa-solid fa-share-nodes"></i>
                        </button>
                        <a
                            href="tel:{{church.contact|cut:' '}}"
                            class="btn btn-sm btn-accent"
                            title="Call"
                        >
                            <i class="fa-solid fa-phone"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %} {% block extra_js %}
<script>
    function saveChurch(id) {
        localStorage.setItem("savedChurch_" + id, true);
        alert("Church saved!");
    }
    function shareChurch(name, url) {
        if (navigator.share) {
            navigator.share({ title: name, url: url });
        } else {
            prompt("Copy this link:", url);
        }
    }
</script>
{% endblock %}
